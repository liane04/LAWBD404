@{
    ViewData["Title"] = "Bem-vindo ao AutoMarket";
}

<!-- Secção Hero com Pesquisa Integrada -->
<section class="hero-section">
    <div class="container text-center">
        <!-- Conteúdo do topo: Título e subtítulo -->
        <div class="hero-content">
            <h1 class="display-3">O seu próximo carro está aqui.</h1>
            <p class="lead fs-4">Pesquise, compare e encontre o carro ideal para si de forma fácil e segura.</p>
        </div>

        <!-- Formulário de Pesquisa movido para dentro da Hero Section -->
        <div class="search-form-container col-lg-10 mx-auto">
            <form action="#" method="get">
                <div class="row g-3 align-items-center">
                    <div class="col-md">
                        <select name="marcaId" class="form-select form-select-lg" aria-label="Marca">
                            <option value="">Todas as Marcas</option>
                            <option value="1">Audi</option>
                            <option value="2">BMW</option>
                            <option value="3">Mercedes-Benz</option>
                            <option value="4">Volkswagen</option>
                            <option value="5">Ford</option>
                        </select>
                    </div>
                    <div class="col-md">
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-white">
                                <i class="bi bi-currency-euro text-muted"></i>
                            </span>
                            <input type="number" name="precoMax" class="form-control" placeholder="Preço Máximo" aria-label="Preço Máximo">
                        </div>
                    </div>
                    <div class="col-md">
                        <div class="input-group input-group-lg">
                            <span class="input-group-text bg-white">
                                <i class="bi bi-geo-alt text-muted"></i>
                            </span>
                            <input type="text" name="localizacao" class="form-control" placeholder="Localização" aria-label="Localização">
                        </div>
                    </div>
                </div>
            </form>
        </div>

        <!-- Botão de Acesso Rápido à Listagem de Anúncios -->
        <div class="mt-5">
            <div class="d-inline-flex flex-column align-items-center">
                <a asp-controller="Anuncios" asp-action="Index" id="btnHeroVerAnuncios" class="btn hero-cta-btn-enhanced btn-lg px-5 py-3 mb-3" style="background: linear-gradient(135deg, #2563eb 0%, #1e40af 100%) !important; color: white !important; opacity: 1 !important; visibility: visible !important;">
                    <span class="d-flex align-items-center" style="color: white !important;">
                        <i class="bi bi-grid-3x3-gap-fill me-3 fs-4" style="color: white !important;"></i>
                        <span class="btn-text" style="color: white !important;">
                            <strong class="d-block fs-5" style="color: white !important;">Explorar Anúncios</strong>
                            <small class="d-block opacity-90" style="color: white !important;">Mais de 150+ veículos disponíveis</small>
                        </span>
                        <i class="bi bi-arrow-right-circle-fill ms-3 fs-4 arrow-icon" style="color: white !important;"></i>
                    </span>
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Secção de Categorias -->
<section class="page-section">
    <div class="container">
        <h2 class="section-title">Explorar por Categoria</h2>
        <div class="row g-4 justify-content-center">
            <div class="col-6 col-md-4 col-lg">
                <a href="#" class="text-decoration-none">
                    <div class="categoria-card">
                        <div class="icon">
                            <i class="bi bi-truck-front fs-1"></i>
                        </div>
                        <h5 class="mb-0">SUV</h5>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg">
                <a href="#" class="text-decoration-none">
                    <div class="categoria-card">
                        <div class="icon">
                            <i class="bi bi-car-front-fill fs-1"></i>
                        </div>
                        <h5 class="mb-0">Sedan</h5>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg">
                <a href="#" class="text-decoration-none">
                    <div class="categoria-card">
                        <div class="icon">
                            <i class="bi bi-speedometer fs-1"></i>
                        </div>
                        <h5 class="mb-0">Desportivo</h5>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg">
                <a href="#" class="text-decoration-none">
                    <div class="categoria-card">
                        <div class="icon">
                            <i class="bi bi-minecart-loaded fs-1"></i>
                        </div>
                        <h5 class="mb-0">Carrinha</h5>
                    </div>
                </a>
            </div>
            <div class="col-6 col-md-4 col-lg">
                <a href="#" class="text-decoration-none">
                    <div class="categoria-card">
                        <div class="icon">
                            <i class="bi bi-car-front fs-1"></i>
                        </div>
                        <h5 class="mb-0">Citadino</h5>
                    </div>
                </a>
            </div>
        </div>
    </div>
</section>

@section Scripts {
    <script>
        // Fazer o botão "Ver Anúncios" atuar como submissão dos filtros
        document.addEventListener('DOMContentLoaded', function () {
            const btn = document.getElementById('btnHeroVerAnuncios');
            if (!btn) return;

            btn.addEventListener('click', function (e) {
                e.preventDefault();

                const baseUrl = '@Url.Action("Index", "Anuncios")';
                const marcaId = document.querySelector('select[name="marcaId"]').value;
                const precoMax = document.querySelector('input[name="precoMax"]').value;
                const localizacao = document.querySelector('input[name="localizacao"]').value;

                const params = new URLSearchParams();
                if (marcaId) params.set('marcaId', marcaId);
                if (precoMax) params.set('precoMax', precoMax);
                if (localizacao) params.set('localizacao', localizacao);

                const url = params.toString() ? `${baseUrl}?${params}` : baseUrl;
                window.location.href = url;
            });

            // Animação de contador para o número de veículos
            const counterElement = document.querySelector('.hero-cta-btn-enhanced small');
            if (counterElement) {
                let count = 0;
                const target = 150;
                const duration = 2000; // 2 segundos
                const increment = target / (duration / 16); // 60 FPS

                const counter = setInterval(() => {
                    count += increment;
                    if (count >= target) {
                        count = target;
                        clearInterval(counter);
                    }
                    counterElement.innerHTML = `Mais de ${Math.floor(count)}+ veículos disponíveis`;
                }, 16);
            }
        });
    </script>
}

<!-- Secção Como Funciona -->
<section class="feature-section page-section">
    <div class="container">
        <h2 class="section-title">Como Funciona</h2>
        <div class="row text-center g-4">
            <div class="col-md-4">
                <div class="feature-icon">
                    <i class="bi bi-search"></i>
                </div>
                <h3>Pesquise</h3>
                <p class="text-muted">Utilize os nossos filtros avançados para encontrar exatamente o que procura, por marca, preço, localização e muito mais.</p>
            </div>
            <div class="col-md-4">
                <div class="feature-icon">
                    <i class="bi bi-bar-chart-line"></i>
                </div>
                <h3>Compare</h3>
                <p class="text-muted">Analise as várias opções lado a lado. Veja fotos, especificações e contacte os vendedores para tirar dúvidas.</p>
            </div>
            <div class="col-md-4">
                <div class="feature-icon">
                    <i class="bi bi-handshake"></i>
                </div>
                <h3>Feche Negócio</h3>
                <p class="text-muted">Contacte diretamente o vendedor para agendar uma visita e fazer a sua proposta. Simples, rápido e seguro.</p>
            </div>
        </div>
    </div>
</section>

<!-- Secção de Estatísticas -->
<section class="stats-section page-section">
    <div class="container text-center">
        <div class="row">
            <div class="col-md-4 mb-4 mb-md-0">
                <div class="stat-item">
                    <div class="stat-icon-wrapper mb-3">
                        <i class="bi bi-people-fill"></i>
                    </div>
                    <h2 class="stat-number">10,000+</h2>
                    <p class="stat-label">Utilizadores Ativos</p>
                </div>
            </div>
            <div class="col-md-4 mb-4 mb-md-0">
                <div class="stat-item">
                    <div class="stat-icon-wrapper mb-3">
                        <i class="bi bi-megaphone-fill"></i>
                    </div>
                    <h2 class="stat-number">25,000+</h2>
                    <p class="stat-label">Anúncios Publicados</p>
                </div>
            </div>
            <div class="col-md-4">
                <div class="stat-item">
                    <div class="stat-icon-wrapper mb-3">
                        <i class="bi bi-patch-check-fill"></i>
                    </div>
                    <h2 class="stat-number">500+</h2>
                    <p class="stat-label">Vendedores Verificados</p>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Secção Call to Action -->
<section class="cta-section page-section">
    <div class="container">
        <h2 class="mb-3">Pronto para começar?</h2>
        <p class="lead mb-4">Milhares de anúncios esperam por si. Encontre o seu carro de sonho hoje mesmo.</p>
        <a href="#" class="btn btn-primary btn-lg">
            <i class="bi bi-grid-3x3-gap-fill me-2"></i>Ver todos os anúncios
        </a>
    </div>
</section>

